<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cookie Selector</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <div class="container" role="main">
      <header class="header" role="banner">
        <div class="header-top">
          <h1 class="title">Cookie Selector</h1>
          <span class="version">v1.0.1</span>
        </div>
        <div class="domain-info" role="status" aria-live="polite">
          <span id="current-domain" aria-label="Current domain"
            >Loading...</span
          >
        </div>
      </header>

      <div class="search-section" role="search">
        <label for="search-input" class="visually-hidden"
          >Search cookies by name or value</label
        >
        <input
          type="text"
          id="search-input"
          placeholder="Search cookies by name or value..."
          class="search-input"
          aria-label="Search cookies by name or value"
          aria-describedby="search-help"
        />
        <div id="search-help" class="visually-hidden">
          Type to filter cookies by name or value. Results update as you type.
        </div>
      </div>

      <div
        class="controls"
        role="toolbar"
        aria-label="Cookie selection controls"
      >
        <button
          id="select-all-btn"
          class="control-btn"
          aria-describedby="select-all-help"
          type="button"
        >
          Select All
        </button>
        <div id="select-all-help" class="visually-hidden">
          Select all visible cookies for export
        </div>
        <button
          id="deselect-all-btn"
          class="control-btn"
          aria-describedby="deselect-all-help"
          type="button"
        >
          Deselect All
        </button>
        <div id="deselect-all-help" class="visually-hidden">
          Deselect all currently selected cookies
        </div>
        <span
          id="selection-count"
          class="selection-count"
          role="status"
          aria-live="polite"
          aria-label="Selection count"
        >
          0 selected
        </span>
      </div>

      <div
        class="format-selection"
        role="region"
        aria-label="Export format selection"
      >
        <label for="export-format" class="format-label">Export Format:</label>
        <select id="export-format" class="format-select">
          <option value="json">JSON (name:value pairs only)</option>
          <option value="json-all">JSON All (complete cookie data)</option>
          <option value="netscape">Netscape (browser-compatible format)</option>
        </select>
      </div>

      <div class="cookie-list-container" role="region" aria-label="Cookie list">
        <div
          id="loading-state"
          class="loading-state"
          role="status"
          aria-live="polite"
        >
          <div class="spinner" aria-hidden="true"></div>
          <span id="loading-message">Loading cookies...</span>
        </div>

        <div
          id="empty-state"
          class="empty-state"
          style="display: none"
          role="status"
          aria-live="polite"
        >
          <span>No cookies found for this domain</span>
        </div>

        <div
          id="error-state"
          class="error-state"
          style="display: none"
          role="alert"
          aria-live="assertive"
        >
          <div class="error-content">
            <div class="error-icon" aria-hidden="true">⚠️</div>
            <p id="error-message" class="error-message">An error occurred</p>
            <div class="error-actions">
              <button
                id="retry-button"
                class="retry-button"
                type="button"
                aria-describedby="retry-help"
              >
                Retry
              </button>
              <div id="retry-help" class="visually-hidden">
                Retry loading cookies from the current domain
              </div>
              <button
                id="permissions-button"
                class="permissions-button"
                style="display: none"
                type="button"
                aria-describedby="permissions-help"
              >
                Grant Permissions
              </button>
              <div id="permissions-help" class="visually-hidden">
                Grant cookie access permissions to this extension
              </div>
            </div>
          </div>
        </div>

        <div
          id="cookie-list"
          class="cookie-list"
          role="group"
          aria-label="Available cookies"
          aria-describedby="cookie-list-help"
        ></div>
        <div id="cookie-list-help" class="visually-hidden">
          List of cookies for the current domain. Use checkboxes to select
          cookies for export.
        </div>
      </div>

      <footer class="footer" role="contentinfo">
        <div class="footer-buttons">
          <button
            id="export-btn"
            class="export-btn"
            disabled
            type="button"
            aria-describedby="export-help"
          >
            Export
          </button>
          <button
            id="export-as-btn"
            class="export-as-btn"
            disabled
            type="button"
            aria-describedby="export-as-help"
          >
            Export As
          </button>
          <button
            id="copy-btn"
            class="copy-btn"
            disabled
            type="button"
            aria-describedby="copy-help"
          >
            Copy
          </button>
        </div>
        <div id="export-help" class="visually-hidden">
          Export selected cookies as JSON format (default).
        </div>
        <div id="export-as-help" class="visually-hidden">
          Choose export format: JSON, JSON All, or Netscape.
        </div>
        <div id="copy-help" class="visually-hidden">
          Copy selected cookies to clipboard in chosen format.
        </div>
      </footer>
    </div>

    <script src="popup.js"></script>
  </body>
</html>
